---
layout: post
title:  "文档"
date:   2014-11-06 18:06:28
categories: uncategory
permalink: /doc/
---

##使用流程
1. 添加composer.json
项目使用版本：1.0.0-alpha
在require中增加 "JMWebCommon":"1.0.0-alpha"。
composer.json样例：

2. 执行命令 composer update
3. 复制Vendor/JMWebCommon/docs/Config/下的文件到项目的Config目录中
4. 复制layout.php到项目的View目录中 如: pop-web/Pop/View/layout.php
5. 添加系统依赖的常量
在系统配置中定义一些依赖常量
{% highlight php %}
#公共库静态地址
define('JMC_ASSET_URL', 'http://s0.jmstatic.com/');
#子系统静态地址
define('JM_ASSET_URL', 'http://s0.jmstatic.com/');
#是否静态开发人员 用于系统开发中
define('IS_STATIC_DEVELOPER', false);
{% endhighlight %}

6. 执行bootstrap启动
在系统入口文件index.php中添加下面的代码
{% highlight php %}
\JMWebCommon\Bootstrap::init(array(
    'app' => JM_APP_NAME, //项目名称 如: pop-web
    'top_domain' => $siteConfig['Site']['Main']['TopLevelDomainName'], //项目使用的顶级域名 如： jumei.com
    'sub_domain' => $subDomain, //子域名 如: pop
    'phase' => JM_PHASE_STAGING, //项目阶段 如: staging
));
{% endhighlight %}

7. 子项目使用layout.php
样例layout中定义了3个block区域。
header: 增加子页面头部css等。
content: 子页面的基本内容。
footer: 子页面javascript内容。
使用layout的一个样例：
{% highlight php %}
<?php $this->extending('layout'); ?>

<?php $this->block('header'); ?>
<style type="text/css">
    .myclass {color:#F00;}
</style>
<?php $this->endblock(); ?>

<?php $this->block('content'); ?>
<div>内容区域</div>
<?php $this->endblock(); ?>

<?php $this->block('footer'); ?>
<script type="application/javascript">
// 调用header
seajs.config({
    base : JM.JMC_STATIC_DOMAIN
});

seajs.use( 'js/app/pop/luxury' );
</script>
<?php $this->endblock(); ?>
{% endhighlight %}
